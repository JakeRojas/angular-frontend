<h1 class="text-center mb-4">My Profile</h1>

<!-- Account Details Section -->
<h2>Account Details</h2>
<div *ngIf="account" class="card p-3 mb-4">
    <div class="mb-3">
        <strong>Name: </strong> {{ account.firstName }} {{ account.lastName }}<br />
        <strong>Email: </strong> {{ account.email }}<br />
        <strong>Phone Number: </strong> {{ account.phoneNumber }}<br />
        <strong>Role: </strong> {{ account.role }}<br />
    </div>
    <!-- Update Profile Button -->
    <div class="text-left">
        <p>
            <a routerLink="update" class="btn btn-success">Update Profile</a>
        </p>
    </div>
</div>

<!-- Branch Information Card -->
<div *ngIf="isManager()" class="card p-3 mb-4 position-relative">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>Branch Information</h3>
        <button (click)="toggleBranchInfo()" class="btn btn-primary">
            {{ showBranchInfo ? 'Hide Branch Information' : 'Show Branch Information' }}
        </button>
    </div>
    <!-- Branch Info Display -->
    <div *ngIf="showBranchInfo" class="mt-3">
        <div class="card p-3 bg-light">
            <strong>Branch: </strong> {{ branch?.name || 'No Branch Assigned' }}<br />
            <strong>Location: </strong> {{ branch?.location || 'N/A' }}<br />
            <strong>Status: </strong> {{ branch?.branchStatus || 'N/A' }}
        </div>
    </div>
</div>

<!-- Activity Logs Card -->
<div class="card p-3 mb-4 position-relative">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>Activity Logs</h3>
        <button (click)="toggleActivityLogs()" class="btn btn-primary">
            {{ showActivityLogs ? 'Hide Activity Logs' : 'Show Activity Logs' }}
        </button>
    </div>
    <!-- Activity Logs Table -->
    <div *ngIf="showActivityLogs">
        <!-- Start and End Date Filters -->
<div class="row g-3 mb-3">
    <div class="col-md-4">
        <label for="actionType">Action Type Search:</label>
        <input
            type="text"
            id="actionType"
            class="form-control"
            placeholder="Search by action type..."
            [(ngModel)]="searchTerm"
            (input)="handleSearch()"
        />
    </div>
    <div class="col-md-4">
        <label for="startDate">Start Date:</label>
        <input
            type="datetime"
            id="startDate"
            class="form-control"
            [(ngModel)]="startDate"
            (change)="handleSearch()"
        />
    </div>
    <div class="col-md-4">
        <label for="endDate">End Date:</label>
        <input
            type="datetime"
            id="endDate"
            class="form-control"
            [(ngModel)]="endDate"
            (change)="handleSearch()"
        />
    </div>
</div>

        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>Action Type</th>
                        <th>Details</th>
                        <th>Timestamp</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let log of filteredLogs">
                        <td>{{ log.actionType }}</td>
                        <td>{{ log.actionDetails }}</td>
                        <td>{{ log.timestamp | date:'MM/dd/yy, hh:mm a' }}</td>
                    </tr>
                    <tr *ngIf="filteredLogs.length === 0">
                        <td colspan="3" class="text-center">No activity logs found</td>
                    </tr>
                </tbody>
            </table>
        </div>
</div>
